"use strict";$.extend({handleError:function(e,t,o,a){e.error?e.error(t,o,a):t.responseText&&console.log(t.responseText)},createUploadIframe:function(e,t){var o="jUploadFrame"+e,a=void 0;return window.ActiveXObject?(a=document.createElement('<iframe id="'+o+'" name="'+o+'" />'),"boolean"==typeof t?a.src="javascript:false":"string"==typeof t&&(a.src=t)):(a=document.createElement("iframe"),a.id=o,a.name=o),a.style.position="absolute",a.style.top="-1000px",a.style.left="-1000px",document.body.appendChild(a),a},createUploadForm:function(e,t,o){var a="jUploadForm"+e,n="jUploadFile"+e,r=$('<form  action="" method="POST" name="'+a+'" id="'+a+'" enctype="multipart/form-data"></form>'),c=$("#"+t),d=$(c).clone();if($(c).attr("id",n),$(c).before(d),$(c).appendTo(r),o)for(var l in o)$('<input type="hidden" name="'+l+'"/>').val(o[l]).appendTo(r);return $(r).css({position:"absolute",top:"-1200px",left:"-1200px"}),$(r).appendTo("body"),r},ajaxFileUpload:function(e){e=$.extend({},$.ajaxSettings,e);var t=Date.now(),o=$.createUploadForm(t,e.fileElementId,e.data);$.createUploadIframe(t,e.secureuri);var a="jUploadFrame"+t,n="jUploadForm"+t,r=!1,c={};e.global&&!$.active++&&$.event.trigger("ajaxStart"),e.global&&$.event.trigger("ajaxSend",[c,e]);var d=function(t){var n=document.getElementById(a);try{n.contentWindow?(c.responseText=n.contentWindow.document.body?n.contentWindow.document.body.innerHTML:null,c.responseXML=n.contentWindow.document.XMLDocument?n.contentWindow.document.XMLDocument:n.contentWindow.document):n.contentDocument&&(c.responseText=n.contentDocument.document.body?n.contentDocument.document.body.innerHTML:null,c.responseXML=n.contentDocument.document.XMLDocument?n.contentDocument.document.XMLDocument:n.contentDocument.document)}catch(t){$.handleError(e,c,null,t)}if(c){r=!0;var d=void 0;try{if("error"!==(d="timeout"!==t?"success":"error")){var l=$.uploadHttpData(c,e.dataType);e.success&&e.success(l,d),e.global&&$.event.trigger("ajaxSuccess",[c,e])}else $.handleError(e,c,d)}catch(t){d="error",$.handleError(e,c,d,t)}e.global&&$.event.trigger("ajaxComplete",[c,e]),e.global&&!--$.active&&$.event.trigger("ajaxStop"),e.complete&&e.complete(c,d),$(n).unbind(),setTimeout(function(){try{$(n).remove(),$(o).remove()}catch(t){$.handleError(e,c,null,t)}},100),c=null}else if("timeout"===t){r=!0;var i="error";try{if("error"===(i="timeout"===t?"error":"success"))$.handleError(e,c,i);else{var u=$.uploadHttpData(c,e.dataType);e.success&&e.success(u,i),e.global&&$.event.trigger("ajaxSuccess",[c,e])}}catch(t){$.handleError(e,c,i,t)}e.global&&($.event.trigger("ajaxComplete",[c,e]),--$.active||$.event.trigger("ajaxStop")),e.complete&&e.complete(c,i),$(n).unbind(),setTimeout(function(){try{$(n).remove(),$(o).remove()}catch(t){$.handleError(e,c,null,t)}},100),c=null}};e.timeout>0&&setTimeout(function(){r||d("timeout")},e.timeout);try{var l=$("#"+n);$(l).attr({action:e.url,method:"POST",target:a}),l.encoding?l.encoding="multipart/form-data":l.enctype="multipart/form-data",$(l).submit()}catch(t){$.handleError(e,c,null,t)}return window.attachEvent?document.getElementById(a).attachEvent("onload",d):document.getElementById(a).addEventListener("load",d,!1),{abort:function(){}}},uploadHttpData:function uploadHttpData(r,type){var data=!type;if(data="xml"===type||data?r.responseXML:r.responseText,"script"===type&&$.globalEval(data),"json"===type){data=r.responseText;var start=data.indexOf(">");if(-1!==start){var end=data.indexOf("<",start+1);-1!==end&&(data=data.substring(start+1,end))}eval("data = "+data)}return"html"===type&&$("<div>").html(data).evalScripts(),data}});