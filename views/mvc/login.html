{% extends "./myBase.html" %}

{% block main %}
<script>
  $(() => {
    let form = $("#stdInfo");
    let back = $('#back');
    form.submit(e => {
      $.ajax({
        type: form.attr('method'),
        url: form.attr('action'),
        data: form.serialize(), // serializes the form's elements.
        success: data => {
          window.location.href = '/userInfo';
        },
        error: data => {
          console.log(data);
        }
      });

      e.preventDefault(); // avoid to execute the actual submit of the form.
    });
    back.click(() => {
      window.history.back();
    });
  });
</script>

<style>
    .custom-form-control {
        width: 70%;
        margin-left: 15%;
    }

    #stdInfo {
        margin-top: 3%;
    }

    #login {
        width: 60%;
        margin-left: 20%;
    }

    #back {
        margin-left: 3%;
        margin-top: 2%;
    }
</style>

<input id="back" type="button" class="btn btn-link" value="< 返回"/>

<form id="stdInfo" action="/api/login" method="post">
    <div class="form-group">
        <input type="text" value="3150803016" class="form-control custom-form-control" id="id" name="id"
               placeholder="学号"/>
    </div>
    <div class="form-group">
        <input type="password" value="jnzx021527" class="form-control custom-form-control" id="password" name="password"
               placeholder="密码"/>
    </div>
    <div class="form-group">
        <input type="text" id="verificationCode" class="form-control"
               style="display: inline-block;margin-left: 15%;width: 40%;"
               name="verificationCode" placeholder="验证码"/>
        <img src="{{verificationCodePictureUrl}}" style="width: 20%;margin-left: 5%;">
    </div>
    <input id="login" type="submit" class="btn btn-primary" value="确定"/>
</form>

{% endblock %}
