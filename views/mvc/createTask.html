{% extends "./mybase.html" %}

{% block main %}
<script>
    $(() => {
        let form = $("#publishInfo");
        let back = $('#back');
        let createTask = $('#createTaskTab');
        form.submit(e => {
            $.ajax({
                type: form.attr('method'),
                url: form.attr('action'),
                data: form.serialize(), // serializes the form's elements.
                success: data => {
                    if (data.user.name) {
                        console.log(data.user.name);
                        window.location.href = '/userInfo';
                    }
                },
                error: data => {
                    alert('error -> ' + data);
                }
            });

            e.preventDefault(); // avoid to execute the actual submit of the form.
        });
        back.click(() => {
            window.history.back();
        });
        createTask.attr('href', 'javascript:void(0)');
    });
</script>
<style>

    label{
        float: left;
        margin-top: 8px;
        margin-left: 20px;
    }

    .form-control{
        width: 60%;
        margin-left: 30%;
    }

    #publishInfo {
        margin-top: 3%;
    }

    #login {
        width: 40%;
        margin-left: 30%;
    }

    #back {
        margin-left: 3%;
        margin-top: 2%;
    }
</style>
<input id="back" type="button" class="btn btn-link" value="< 返回"/>
<form id="publishInfo" action="/api/publish" method="post">

    <div class="form-group">
        <label>任务类型</label>
        <div class="form-control">
        <select name="task">
            <option>请选择任务类型</option>
            <option>代课</option>
            <option>代取</option>
            <option>顺风车</option>
            <option>借东西</option>
        </select>
        </div>
    </div>

    <div class="form-group">
        <label>姓名</label>
        <div class="form-control">
            <input type="text" name="name" placeholder="姓名"/>
        </div>
    </div>


    <div class="form-group">
        <label>电话号码</label>
        <div class="form-control">
            <input type="text" id="tel" name="tel" placeholder="电话号码"/>
        </div>
    </div>

    <div class="form-group">
        <label>截止时间</label>
        <div class="form-control">
            <input type="text" name="name" placeholder="截止时间"/>
        </div>
    </div>

    <div class="form-group">
        <label>详情</label>
        <div class="form-control">
            <input type="text" name="name" placeholder="任务详情"/>
        </div>
    </div>

    <div class="form-group">
        <label>图片</label>
        <div class="form-control">
            <input type="text" name="name" placeholder="图片补充"/>
        </div>
    </div>

    <div class="form-group">
        <label>报酬</label>
        <div class="form-control">
            <input type="text" id="reward" name="reward" placeholder="报酬"/>
        </div>
    </div>

    <input id="login" type="submit" class="btn btn-primary" value="发布"/>
</form>
{% endblock %}
