{% extends './myBase.html' %}

{% block main %}
<script>
  $(() => {
    let form = $('form');
    $('.back').click(() => {
      window.history.back();
    });
    form.submit(e => {
      $.ajax({
        type: form.attr('method'),
        url: form.attr('action'),
        data: form.serialize(), // serializes the form's elements.
        success: data => {
          window.location.href = '/';
        },
        error: data => {
          alert('error -> ' + data);
        }
      });

      e.preventDefault(); // avoid to execute the actual submit of the form.
    });
  });
</script>

<style>
    .form-control {
        width: 50%;
        margin-left: 25%;
    }

    .userInfo {
        margin-top: 3%;
    }

    .submit {
        width: 40%;
        margin-left: 30%;
    }

</style>
<input type='button' class='btn btn-link back' value='< 返回'/>
<form class="userInfo" action='/api/save' method='post'>
    <div class='form-group'>
        <input type='text' class='form-control' id='name' name='name' placeholder='姓名' value="{{user.name}}"/>
    </div>
    <div class='form-group'>
        <input type='tel' class='form-control' id='tel' name='tel' placeholder='电话' value="{{user.tel}}"/>
    </div>
    <div class='form-group'>
        <input type='tel' class='form-control' id='qq' name='qq' placeholder='QQ号' value="{{user.qq}}"/>
    </div>
    <div class='form-group'>
        <input type='text' class='form-control' id='wx' name='wx' value="{{user.wx}}" placeholder='微信号'/>
    </div>
    <input type='submit' class='btn btn-primary submit' value='提交'/>
</form>
{% endblock %}
