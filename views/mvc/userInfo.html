{% extends './myBase.html' %}

{% block main %}
<script>
    $(() => {
        let back = $('#back'),
            form = $("#userInfo");
        back.click(() => {
            window.history.back();
        });
        form.submit(e => {
            $.ajax({
                type: form.attr('method'),
                url: form.attr('action'),
                data: form.serialize(), // serializes the form's elements.
                success: data => {
                    window.location.href = '/';
                },
                error: data => {
                    alert('error -> ' + data);
                }
            });

            e.preventDefault(); // avoid to execute the actual submit of the form.
        });
    });
</script>

<style>
    .form-control {
        width: 50%;
        margin-left: 25%;
    }

    #userInfo {
        margin-top: 3%;
    }

    #submit {
        width: 40%;
        margin-left: 30%;
    }

    #back {
        margin-left: 3%;
        margin-top: 2%;
    }
</style>
<input id='back' type='button' class='btn btn-link' value='< 返回'/>
<form id='userInfo' action='/api/save' method='post'>
    <div class='form-group'>
        <input type='text' class='form-control' id='name' name='name' placeholder='姓名' value="{{user.name}}"/>
    </div>
    <div class='form-group'>
        <input type='tel' class='form-control' id='tel' name='tel' placeholder='电话' value="{{user.tel}}"/>
    </div>
    <div class='form-group'>
        <input type='tel' class='form-control' id='qq' name='qq' placeholder='QQ号' value="{{user.qq}}"/>
    </div>
    <div class='form-group'>
        <input type='text' class='form-control' id='wx' name='wx' value="{{user.wx}}" placeholder='微信号'/>
    </div>
    <input id='submit' type='submit' class='btn btn-primary' value='提交'/>
</form>
{% endblock %}
